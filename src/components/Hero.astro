---
import '@fontsource-variable/raleway';
import hero from "../data/hero.json";
import ofertas from "../data/ofertas.json";

// URL directa de tu imagen en Google Drive
const driveBg = "/imagen_presentacion.png";
---

<section id="index" class="min-h-screen flex items-center justify-center text-center text-slate-50 relative overflow-hidden">

  <!-- Imagen de fondo -->
  <div
    class="hero-bg-image absolute inset-0 -z-10"
    style={`background-image:url('${driveBg}');`}
    aria-hidden="true"
  ></div>

  <!-- Fondo Transparente -->
  <div class="hero-bg-gradient absolute inset-0 -z-10" aria-hidden="true"></div>

  <!-- Contenido principal -->
  <div class="flex flex-col h-screen justify-start pt-28 px-6 sm:px-10 md:px-20 z-10 w-full animate-fade-in-up">

    <!-- Banner flotante -->
    {ofertas.habilitado && (
      <div class="absolute top-6 left-1/2 z-20 animate-bounce-slow w-full flex justify-center px-4">
        <a
          href="#ofertas"
          class="bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-2 md:px-6 md:py-3 rounded-full shadow-lg text-sm font-semibold flex items-center gap-2 hover:scale-105 transition-transform cursor-pointer scroll-smooth-link"
        >
          <div class="flex justify-center items-center">
            <span class="animate-pulse translate-3 text-xl">ðŸ”¥</span>
          </div>
          <span>Â¡Ofertas Especiales Disponibles!</span>
          <span class="text-xs bg-white text-orange-500 px-2 py-0.5 md:px-3 md:py-1 rounded-full">VER</span>
        </a>
      </div>
    )}

    <div class="flex flex-col justify-center items-center py-18 gap-10 sm:gap-20">

      <!-- Logo -->
      <div class="flex items-center gap-2 md:gap-4">
        <img src="/favicon.png" alt="Logo AEMI" class="hidden md:block h-12 md:h-20 w-auto object-contain">
        <div class="leading-none font-black text-left font-raleway">
          <div class="text-3xl sm:text-4xl md:text-7xl -mb-2">
            <span class="text-[#003B84]">AEMI</span>
          </div>
          <div class="h-[3px] w-full bg-[#003B84] my-2"></div>
          <div class="text-3xl sm:text-4xl md:text-7xl -ml-[1px] md:-ml-[3px] -mt-[7px] md:-mt-[3px]">
            <span class="text-[#00AEEF]">INGENIERÄªA</span>
          </div>
          <div class="text-[10px] md:text-[20px] text-[#003B84] uppercase font-extrabold text-nowrap">
            Expertos en refrigeraciÃ³n y aires acondicionados.
          </div>
        </div>
      </div>

      <!-- Botones -->
      <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 md:gap-6 justify-center items-center w-full animate-fade-in-up animation-delay-400">
        <a
          href="#contact"
          class="btn-primary w-full sm:w-auto max-w-xs inline-flex items-center justify-center gap-2 px-4 sm:px-6 md:px-8 py-2 sm:py-3 md:py-4 bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 text-slate-50 font-semibold rounded-full transition-all duration-300 hover:transform hover:-translate-y-1 hover:shadow-2xl text-sm sm:text-base md:text-lg"
        >
          <span class="text-lg sm:text-xl">{hero.botones[0].icono}</span>
          <span class="whitespace-nowrap">{hero.botones[0].texto}</span>
        </a>

        <a
          href="#services"
          class="btn-secondary w-full sm:w-auto max-w-xs inline-flex items-center justify-center gap-2 px-4 sm:px-6 md:px-8 py-2 sm:py-3 md:py-4 bg-slate-50 text-blue-900 font-semibold rounded-full transition-all duration-300 hover:transform hover:-translate-y-1 hover:shadow-2xl hover:bg-slate-200 hover:text-blue-900 text-sm sm:text-base md:text-lg"
        >
          <span class="text-lg sm:text-xl">{hero.botones[1].icono}</span>
          <span class="whitespace-nowrap">{hero.botones[1].texto}</span>
        </a>
      </div>

    </div>

  </div>

  <!-- Panel de promociones -->
  {ofertas.habilitado && (
    <div
      id="promocionesPanel"
      class="promociones-panel fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 opacity-0 invisible transition-all duration-300"
    >
      <div
        class="bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl transform scale-95 transition-all duration-300"
      >
        <div class="bg-gradient-to-r from-orange-500 to-red-500 p-6 text-white relative">
          <button
            onclick="togglePromociones()"
            class="absolute top-4 right-4 text-white hover:text-gray-200 text-2xl font-bold"
            >Ã—</button
          >
          <h2 class="text-2xl md:text-3xl font-bold mb-2">
            ðŸ”¥ Promociones Especiales
          </h2>
          <p class="text-orange-100">Ofertas limitadas - Â¡Aprovecha ahora!</p>
        </div>

        <div class="p-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- AquÃ­ van tus 4 promociones tal como ya las tienes -->
            <!-- ... -->
          </div>

          <div class="mt-8 text-center bg-gray-50 p-6 rounded-xl">
            <h3 class="text-xl font-bold text-gray-800 mb-2">
              Â¿No encuentras lo que buscas?
            </h3>
            <p class="text-gray-600 mb-4">
              ContÃ¡ctanos para ofertas personalizadas
            </p>
            <button
              class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors font-semibold"
            >
              Contactar Especialista
            </button>
          </div>
        </div>
      </div>
    </div>
  )}
</section>

<style>
  .font-raleway {
    font-family: 'Raleway Variable', sans-serif;
  }

  .hero-bg-image {
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    filter: saturate(1.05) contrast(1.02) brightness(0.9);
    transform: translateZ(0);
  }

  .hero-bg-gradient {
    background-color: rgba(255, 255, 255, 0.30);
  }

  .animate-fade-in-up { animation: fadeInUp 1s ease forwards; }
  .animation-delay-200 { animation-delay: 0.2s; opacity: 0; }
  .animation-delay-400 { animation-delay: 0.4s; opacity: 0; }

  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(30px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  @keyframes bounce-slow {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0) translateX(-50%); }
    40% { transform: translateY(-10px) translateX(-50%); }
    60% { transform: translateY(-5px) translateX(-50%); }
  }

  .animate-bounce-slow { animation: bounce-slow 3s infinite; }

  .btn-primary:hover,
  .btn-secondary:hover,
  .btn-promociones:hover {
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  }

  .scroll-smooth-link { scroll-behavior: smooth; }
  html { scroll-behavior: smooth; }

  .promociones-panel.show { opacity: 1; visibility: visible; }
  .promociones-panel.show > div { transform: scale(1); }

  @media (max-width: 640px) {
    .hero-bg-image { background-attachment: scroll; }
    .hero { min-height: 100vh; min-height: 100dvh; }
  }

  @media (max-width: 480px) {
    .btn-primary, .btn-secondary, .btn-promociones { font-size: 0.875rem; padding: 0.75rem 1.5rem; }
  }

  @media (max-width: 375px) {
    .btn-primary, .btn-secondary, .btn-promociones { font-size: 0.8rem; padding: 0.7rem 1.2rem; }
  }
</style>

<script>
  function togglePromociones() {
    const panel = document.getElementById("promocionesPanel");
    if (panel) {
      panel.classList.toggle("show");
      document.body.style.overflow = panel.classList.contains("show") ? "hidden" : "auto";
    }
  }

  const promocionesPanel = document.getElementById("promocionesPanel");
  if (promocionesPanel) {
    promocionesPanel.addEventListener("click", (e) => {
      if (e.target === e.currentTarget) togglePromociones();
    });
  }
</script>


<style>

  .font-raleway {
    font-family: 'Raleway Variable', sans-serif;
  }

  /* â€”â€” NUEVAS CAPAS DE FONDO â€”â€” */

  /* Capa 1: Foto fija */
  .hero-bg-image {
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    filter: saturate(1.05) contrast(1.02) brightness(0.9);
    transform: translateZ(0);
  }

  /* Capa 2: Gradiente (tu look azul) */
    .hero-bg-gradient {
    background-color: rgba(255, 255, 255, 0.30);
  }

  /* Capa 3: Arte (bokeh + SVG) */
  .hero-art { pointer-events: none; }

  .bokeh {
    width: 100%;
    height: 100%;
    background-image:
      radial-gradient(220px 220px at 10% 20%, rgba(255,255,255,0.12) 0%, rgba(255,255,255,0) 60%),
      radial-gradient(260px 260px at 85% 25%, rgba(255,255,255,0.10) 0%, rgba(255,255,255,0) 60%),
      radial-gradient(180px 180px at 30% 80%, rgba(255,255,255,0.10) 0%, rgba(255,255,255,0) 60%),
      radial-gradient(200px 200px at 70% 70%, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0) 60%);
    filter: blur(2px);
  }
  /* â€”â€” Animaciones que ya tenÃ­as â€”â€” */
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(30px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in-up { animation: fadeInUp 1s ease forwards; }
  .animation-delay-200 { animation-delay: 0.2s; opacity: 0; }
  .animation-delay-400 { animation-delay: 0.4s; opacity: 0; }

  @keyframes bounce-slow {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0) translateX(-50%); }
    40% { transform: translateY(-10px) translateX(-50%); }
    60% { transform: translateY(-5px) translateX(-50%); }
  }
  @keyframes pulse-glow {
    0% { box-shadow: 0 0 0 0 rgba(251,191,36,0.7); }
    70% { box-shadow: 0 0 0 10px rgba(251,191,36,0); }
    100% { box-shadow: 0 0 0 0 rgba(251,191,36,0); }
  }
  .animate-bounce-slow { animation: bounce-slow 3s infinite; }
  .animate-pulse-glow { animation: pulse-glow 2s infinite; }

  .btn-primary:hover,
  .btn-secondary:hover,
  .btn-promociones:hover {
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  }

  /* Scroll suave */
  .scroll-smooth-link { scroll-behavior: smooth; }
  html { scroll-behavior: smooth; }

  /* Panel de promociones */
  .promociones-panel.show { opacity: 1; visibility: visible; }
  .promociones-panel.show > div { transform: scale(1); }

  /* Responsive */
  @media (max-width: 640px) {
    .hero-bg-image { background-attachment: scroll; }
    .hero { min-height: 100vh; min-height: 100dvh; }
  }
  @media (max-width: 480px) {
    .btn-primary, .btn-secondary, .btn-promociones { font-size: 0.875rem; padding: 0.75rem 1.5rem; }
  }
  @media (max-width: 375px) {
    .btn-primary, .btn-secondary, .btn-promociones { font-size: 0.8rem; padding: 0.7rem 1.2rem; }
  }
</style>

<script>
  function togglePromociones() {
    const panel = document.getElementById("promocionesPanel");
    if (panel) {
      panel.classList.toggle("show");
      document.body.style.overflow = panel.classList.contains("show") ? "hidden" : "auto";
    }
  }

  // Cerrar modal al hacer clic fuera
  const promocionesPanel = document.getElementById("promocionesPanel");
  if (promocionesPanel) {
    promocionesPanel.addEventListener("click", (e) => {
      if (e.target === e.currentTarget) togglePromociones();
    });
  }
</script>
