---
import Layout from '../../layouts/Layout.astro';
import ServiceGallery from '../../components/ServiceGallery.astro';
import data from '../../data/servicios.json';

export async function getStaticPaths() {
  return data.cards.map((c) => ({ params: { slug: c.slug } }));
}

const { slug } = Astro.params;
const s = data.cards.find((c) => c.slug === slug);
if (!s) throw Astro.redirect('/#services');

const title = s.seo?.title ?? `${s.titulo} | AEMI Ingeniería`;
const desc  = s.seo?.description ?? s.descripcion;
---

<Layout title={title} description={desc} showHero={true}>
  <!-- Hero del servicio -->
  <section class="bg-gradient-to-br from-blue-800 to-blue-900 text-white">
    <div class="max-w-7xl mx-auto px-6 py-16 grid md:grid-cols-2 gap-10 items-center">
      <div>
        <span class="px-4 py-1 bg-white/10 rounded-full text-sm mb-4">Servicio</span>
        <h1 class="text-4xl md:text-5xl font-extrabold leading-tight">{s.titulo}</h1>
        <p class="mt-4 text-blue-100 text-lg">{s.descripcionLarga ?? s.descripcion}</p>

        <div class="mt-8 flex flex-wrap gap-3">
          <a href="/#contact"
             class="inline-flex items-center gap-2 px-6 py-3 rounded-full bg-gradient-to-r from-red-500 to-orange-500 font-semibold hover:from-red-600 hover:to-orange-600 transition">
            📩 Solicitar presupuesto
          </a>
          <a href="/#services"
             class="inline-flex items-center gap-2 px-6 py-3 rounded-full bg-white/10 hover:bg-white/20">
            ← Volver a servicios
          </a>
        </div>
      </div>

      <div class="relative">
        <div class="rounded-3xl overflow-hidden shadow-2xl">
          <img src={s.heroImagen} alt={s.titulo} class="w-full h-96 md:h-[32rem] object-cover" />
        </div>
        <div class="absolute inset-0 rounded-3xl bg-gradient-to-br from-blue-400/10 via-purple-400/10 to-orange-400/10 blur-xl opacity-50 -z-10"></div>
      </div>
    </div>
  </section>

  {s.galeria?.length > 0 && (
    <ServiceGallery
      titulo="Galería del servicio"
      descripcion="Algunos trabajos y proyectos destacados."
      items={s.galeria}
    />
  )}

  <!-- CTA final + redirección a Contacto -->
  <section class="py-12">
    <div class="max-w-6xl mx-auto px-4">
      <div class="bg-white rounded-3xl shadow-md p-8 text-center">
        <h3 class="text-2xl md:text-3xl font-bold text-blue-900">¿Listo para cotizar {s.titulo.toLowerCase()}?</h3>
        <p class="text-gray-600 mt-2">Escríbenos y te contactamos a la brevedad.</p>
        <a href="/#contact"
           class="mt-6 inline-flex items-center gap-2 px-8 py-4 rounded-full bg-gradient-to-r from-red-500 to-orange-500 text-white font-semibold hover:from-red-600 hover:to-orange-600 transition">
          Contáctanos 📩
        </a>
      </div>
    </div>
  </section>

</Layout>
